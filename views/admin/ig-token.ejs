<main class="admin-page">
  <h1>Instagram Access Token</h1>

  <% if (current) { %>
    <p>
      <strong>Current token:</strong>
      <code><%= current.access_token.slice(0, 6) %>...<%= current.access_token.slice(-6) %></code>
    </p>
    <% if (current.expires_at) { %>
      <p><strong>Expires on:</strong>
  <%= current.expires_at.toLocaleDateString('en-US', {
        month: 'numeric',
        day: 'numeric',
        year: 'numeric'
     }) %>
</p>
    <% } %>
  <% } else { %>
    <p>No token stored yet.</p>
  <% } %>

  <% if (saved) { %>
    <div class="flash-success">
        âœ” New Instagram token saved successfully!
    </div>
    <% } %>

  <hr>

  <h2>Update Token</h2>
  <p>Paste a new long-lived Instagram access token from the Meta developer UI.</p>
  <p>Here's the link: <a target="_blank" href="https://developers.facebook.com/tools/explorer/" rel="noopener noreferrer" style="text-decoration: none; color: rgb(161, 5, 5);">https://developers.facebook.com/tools/explorer/</a></p>
  <p><strong>**Once you've created a new token, go into the debugger, paste the new token in, and then extend to a long-lived token at the bottom. Very important step.</strong></p>

  <form method="POST" action="/admin/ig-token">
    <label for="token">New token:</label><br>
    <textarea id="token" name="token" rows="4" cols="80" required></textarea><br><br>
    <button type="submit" class="btn btn-cta"><span>Save Token</span></button>
  </form>
</main>
