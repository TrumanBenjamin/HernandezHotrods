<main class="contact-split">
  <!-- LEFT: media  -->
  <aside class="contact-media">
    <video class="media-video" autoplay muted loop playsinline>
      <source src="/media/nova.mp4" type="video/mp4" />
    </video>
   
  </aside>

  <!-- RIGHT: panel -->
  <section class="contact-panel angle-caps">
    <header class="contact-header">
      <h1>Contact Us</h1>
      <p class="sub">
        If you have any questions, are ready to pull the trigger on your dream build, or are interested in any of our vehicles for sale,
        weâ€™d love to hear from you!
      </p>
    </header>

    <!-- Flash / errors -->
    <% if (errors && errors.length > 0) { %>
      <ul class="form-flash form-errors">
        <% errors.forEach(error => { %>
          <li><%= error %></li>
        <% }) %>
      </ul>
    <% } %>

    <% if (success) { %>
      <p class="form-flash form-success"><%= success %></p>
    <% } %>

    <!-- Contact form -->
    <form action="/contact" method="POST" novalidate class="contact-form slim" enctype="multipart/form-data">
      <div class="row two-col">
        <div class="field">
          <label for="name">Full Name</label>
          <input
            type="text"
            id="name"
            name="name"
            placeholder=""
            value="<%= formData?.name || '' %>"
            required
            minlength="2"
          />
        </div>

        <div class="field">
          <label for="email">Email Address</label>
          <input
            type="email"
            id="email"
            name="email"
            placeholder=""
            value="<%= formData?.email || '' %>"
            required
          />
        </div>
      </div>


      <div class="field">
        <label for="vehicle">Vehicle Info <span class="optional">(optional)</span></label>
        <input
          type="text"
          id="vehicle"
          name="vehicle"
          placeholder="Year, make, model, engine, etc."
          value="<%= formData?.vehicle || '' %>"
        />
      </div>

      <div class="field">
        <label for="message">Message</label>
        <textarea
          id="message"
          name="message"
          placeholder="Tell us about your project..."
          required
          minlength="10"
        ><%= formData?.message || '' %></textarea>
      </div>

      <div class="field">
        <input
          type="file"
          id="photos"
          name="photos"
          accept="image/*"
          multiple
        />
        <small>PNG/JPG/WebP. Limit 5.</small>
      </div>

      <button type="submit" class="btn-send"><span>Send</span></button>
    </form>

    <div class="more-info">
      More information, like our address and phone number, available 
      <a href="https://share.google/RlZZ6wbnBc6wLkito">here.</a>
    </div>
  </section>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const alerts = document.querySelectorAll('.form-flash');
      if (alerts.length > 0) {
        setTimeout(() => {
          alerts.forEach(el => {
            el.classList.add('fade-out');
            setTimeout(() => el.remove(), 1000);
          });
        }, 5000);
      }
    });
      // client-side guard (nice UX, server still validates)
  document.getElementById('photos')?.addEventListener('change', (e) => {
    if (e.target.files.length > 5) {
      alert('Please select at most 5 images.');
      e.target.value = ''; // reset selection
    }
  });
  </script>
</main>
